{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    "helpers:pinGitHubActionDigests"
  ],
  "timezone": "UTC",
  "schedule": ["at any time"],
  "labels": ["dependencies", "renovate"],
  "assigneesFromCodeOwners": true,
  "reviewersFromCodeOwners": true,
  "platformAutomerge": true,
  "branchPrefix": "renovate/",
  "gitAuthor": "Renovate Bot <bot@renovateapp.com>",
  "commitMessagePrefix": "chore(deps): ",
  "commitMessageAction": "update",
  "commitMessageTopic": "{{depName}}",
  "commitMessageExtra": "to {{newVersion}}",
  "prTitle": "{{commitMessagePrefix}}{{commitMessageAction}} {{commitMessageTopic}}{{commitMessageExtra}}",
  "prConcurrentLimit": 5,
  "prHourlyLimit": 2,

  "github-actions": {
    "enabled": true,
    "pinDigests": true
  },

  "packageRules": [
    {
      "description": "GitHub Actions - Auto-merge non-major updates",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["minor", "patch", "pin", "digest"],
      "automerge": true,
      "automergeType": "pr",
      "automergeStrategy": "squash",
      "groupName": "GitHub Actions",
      "rangeStrategy": "pin",
      "semanticCommits": "enabled",
      "semanticCommitType": "chore",
      "semanticCommitScope": "deps"
    },
    {
      "description": "GitHub Actions - Manual review for major updates",
      "matchManagers": ["github-actions"],
      "matchUpdateTypes": ["major"],
      "automerge": false,
      "addLabels": ["major-update"]
    },
    {
      "description": "Security-focused actions - Higher priority",
      "matchManagers": ["github-actions"],
      "matchPackageNames": [
        "actions/create-github-app-token",
        "step-security/harden-runner",
        "ossf/scorecard-action"
      ],
      "priority": 10,
      "automerge": false,
      "addLabels": ["security"]
    },
    {
      "description": "Core CI actions - Medium priority automerge",
      "matchManagers": ["github-actions"],
      "matchPackageNames": [
        "actions/checkout",
        "actions/setup-*",
        "actions/cache",
        "actions/upload-artifact",
        "actions/download-artifact"
      ],
      "automerge": true,
      "matchUpdateTypes": ["minor", "patch", "digest"]
    }
  ],

  "prBodyTemplate": "This PR contains the following updates:\n\n| Package | Type | Update | Change | Notes |\n|---------|------|--------|--------|-------|\n{{#each upgrades as |upgrade|}}\n| {{upgrade.depName}} | {{upgrade.depType}} | {{upgrade.updateType}} | `{{upgrade.currentValue}}` ‚Üí `{{upgrade.newValue}}` | {{#if upgrade.homepage}}[Homepage]({{upgrade.homepage}}){{/if}} |\n{{/each}}\n\n---\n\n### üîí Security & SHA Pinning\n\nAll GitHub Actions are automatically pinned to their commit SHAs for enhanced security. This prevents supply chain attacks while still allowing for convenient updates.\n\n### ‚öôÔ∏è Configuration\n\nüìÖ **Schedule**: {{schedule}}\nüö¶ **Automerge**: {{#if automerge}}‚úÖ Enabled for non-major updates{{else}}‚ùå Disabled - manual review required{{/if}}\n‚ôªÔ∏è **Rebasing**: Whenever PR becomes conflicted\nüè∑Ô∏è **Labels**: {{labels}}\n\n### üìã Checklist\n\n- [ ] CI checks pass\n- [ ] No breaking changes in minor/patch updates\n- [ ] Security implications reviewed (for major updates)\n\n---\n\nü§ñ This PR was generated by [Renovate](https://github.com/renovatebot/renovate)\n\n{{#if hasReleaseNotes}}\n### Release Notes\n{{#each upgrades as |upgrade|}}\n{{#if upgrade.hasReleaseNotes}}\n#### {{upgrade.depName}} {{upgrade.newVersion}}\n{{upgrade.releaseNotes}}\n{{/if}}\n{{/each}}\n{{/if}}",

  "vulnerabilityAlerts": {
    "enabled": true
  },
  "osvVulnerabilityAlerts": true,
  "dependencyDashboard": true,
  "dependencyDashboardTitle": "üîÑ Dependency Dashboard",
  "dependencyDashboardApproval": false,
  "dependencyDashboardAutoclose": true,

  "enabledManagers": [
    "github-actions",
    "nix"
  ],
  "ignorePaths": [
    "**/node_modules/**",
    "**/vendor/**"
  ]
}